/* Copyright (c) 2024 Ambiq Micro Inc. */
/* SPDX-License-Identifier: Apache-2.0 */

#include <arm/armv8.1-m.dtsi>
#include <mem.h>
#include <apollo5/am_apollo5.h>
/ {
	clocks {
		uartclk: apb-pclk {
			compatible = "fixed-clock";
			clock-frequency = <24000000>;
			#clock-cells = <0>;
		};
	};

    cpus {
        #address-cells = <1>;
        #size-cells = <0>;

        cpu0: cpu@0 {
            compatible = "arm,cortex-m55";
            reg = <0>;
        };
    };

    /* MRAM region */
    flash0: flash@410000 {
        compatible = "soc-nv-flash";
        reg = <0x00410000 0x3F0000>;
    };

    /* TCM */
    itcm: itcm@0 {
        compatible = "zephyr,memory-region";
        reg = <0x00000000 0x40000>;
        zephyr,memory-region = "ITCM";
    };

    dtcm: dtcm@20000000 {
        compatible = "zephyr,memory-region";
        reg = <0x20000000 0x7C000>;
        zephyr,memory-region = "DTCM";
    };

    /* SRAM */
    sram0: memory@20080000 {
        compatible = "mmio-sram";
        reg = <0x20080000 0x300000>;
    };

    soc {
        compatible = "ambiq,apollo5", "ambiq,apollo5x", "simple-bus";

        pwrcfg: pwrcfg@40021000 {
            compatible = "ambiq,pwrctrl";
            reg = <0x40021000 0x400>;
            #pwrcfg-cells = <2>;
        };

        stimer0: stimer@40008800 {
            compatible = "ambiq,stimer";
            reg = <0x40008800 0x80>;
            interrupts = <32 0>;
            status = "okay";
        };

        wdt0: watchdog@40024000 {
            compatible = "ambiq,watchdog";
            reg = <0x40024000 0x400>;
            interrupts = <1 0>;
            clock-frequency = <16>;
            status = "disabled";
        };

		uart0: uart@4001c000 {
			compatible = "ambiq,uart", "arm,pl011";
			reg = <0x4001c000 0x1000>;
			interrupts = <15 0>;
			interrupt-names = "UART0";
			status = "disabled";
			clocks = <&uartclk>;
			ambiq,pwrcfg = <&pwrcfg 0x4 0x200>;
		};
		uart1: uart@4001d000 {
			compatible = "ambiq,uart", "arm,pl011";
			reg = <0x4001d000 0x1000>;
			interrupts = <16 0>;
			interrupt-names = "UART1";
			status = "disabled";
			clocks = <&uartclk>;
			ambiq,pwrcfg = <&pwrcfg 0x4 0x400>;
		};

		uart2: uart@4001e000 {
			compatible = "ambiq,uart", "arm,pl011";
			reg = <0x4001e000 0x1000>;
			interrupts = <17 0>;
			interrupt-names = "UART2";
			status = "disabled";
			clocks = <&uartclk>;
			ambiq,pwrcfg = <&pwrcfg 0x4 0x800>;
		};

		uart3: uart@4001f000 {
			compatible = "ambiq,uart", "arm,pl011";
			reg = <0x4001f000 0x1000>;
			interrupts = <18 0>;
			interrupt-names = "UART3";
			status = "disabled";
			clocks = <&uartclk>;
			ambiq,pwrcfg = <&pwrcfg 0x4 0x1000>;
		};

    };
};

&nvic {
    arm,num-irq-priority-bits = <4>;
};